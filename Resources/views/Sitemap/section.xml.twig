<?xml version="1.0" encoding="UTF-8" ?>
{% spaceless %}
<urlset 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd"
	xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
	xmlns:image="http://www.google.com/schemas/sitemap-image/1.1"
	xmlns:mobile="http://www.google.com/schemas/sitemap-mobile/1.0">
{% for url in section.getUrls() %}
    
    <url>
        <loc>{{ url.getLocation() }}</loc>
        
        {% if  url.getLastModificationDate() | length > 0  %}
        <lastmod>{{ url.getLastModificationDate() | date('c') }}</lastmod>
        {% endif %}
        
        {% if  url.getChangeFrequency() | length > 0 %}
        <changefreq>{{ url.getChangeFrequency() }}</changefreq>
        {% endif %}
        
        {% if  url.getPriority() | length > 0 %}
        <priority>{{ url.getPriority() }}</priority>
        {% endif %}
        
        {% for image in url.getImages() %}
        <image:image>
            <image:loc>{{ image.getLocation() }}</image:loc>
            
            {% if image.getCaption() | length > 0 %}
            <image:caption>{{ image.getCaption() }}</image:caption>
            {% endif %}
            
            {% if image.getGeoLocation() | length > 0 %}
                <image:geo_location>{{ image.getGeoLocation() }}</image:geo_location>
            {% endif %}
                
            {% if image.getTitle() | length > 0 %}
                <image:title>{{ image.getTitle() }}</image:title>
            {% endif %}
                
            {% if image.getLicense() | length > 0 %}
                <image:license>{{ image.getLicense() }}</image:license>
            {% endif %}
                
        </image:image>
        {% endfor %}
        
        {# si on est en mobile on ajoute la balise #}
        {% if  url.isMobile() %}
        <mobile:mobile/>
        {% endif %}
    </url>
    
	{#<?php
		$xml	= $o_sitemapUrl->toXML();
		// take into account the fact that there is a max file size allowed for sitemap
		// Note: strlen won't return correct byte value but the error won't be more than some bytes  (this is why we take a 10000 octet margin to the max length
		if( ob_get_length() + strlen( $xml ) >= $maxSize )
		{
			break;
		}
		echo $xml;
		$counter--;
	?> #}
{% endfor %}
    
</urlset>

{#<?php $sf_user->setAttribute( 'urlsToReportCounter', $counter, 'prestaSitemap' ); ?>#}
{% endspaceless %}
